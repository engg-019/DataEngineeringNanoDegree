# Project: Data Modelling with Cassandra
## Introduction
A startup called Sparkify wants to analyze the data they've been collecting on songs and 
user activity on their new music streaming app. The analysis team is particularly interested 
in understanding what songs users are listening to. Currently, there is no easy way to query 
the data to generate the results, since the data reside in a directory of CSV files on user
activity on the app.

The aim of  this project is to create a Apache Cassandra database which can create queries on 
song play data to answer the questions. The database will then be tested by running queries given
by the analytics team from Sparkify to create the results.

## Project Description
In this project, data modelling with Cassandra is done and ETL operations using Python are performed. 
Following are different tasks which are done in the project:
1. Create database schema and tables in Apache Cassandra according to the questions that need to answered.
2. ETL pipeline that transfers data from local directories into the tables in Cassandra using Python and 
CQL.

## Questions about the data
Following are the three questions that need to be answered about the data:
1. Give me the artist, song title and song's length in the music app history that was heard during 
sessionId = 338, and itemInSession = 4
2. Give me only the following: name of artist, song (sorted by itemInSession) and user (first and last name) 
for userid = 10, sessionid = 182
3. Give me every user name (first and last) in my music app history who listened to the song 
'All Hands Against His Own'

## Table Designs for query
### Query 1
For the first question the following query is formulated:

	SELECT artist, song_title, song_length 
	FROM songs_session
	WERE sessionId = 338 AND itemInSession  = 4;

and for the above query the table `songs_session` is created with the following structure:

|Field|Type|Key|
|-----|----|----|
|session_id|INT|Partition|
|item_in_session|INT|Clustering|
|artist|TEXT||
|song_title|TEXT||
|song_length|TEXT||
|(session_id,item_id_session)||PRIMARY|

### Query 2
For the second question the following query is formulated:

	SELECT artist, song_title, user 
    FROM songs_user
    WHERE userId = 10 AND sessionId = 182;

and for the above query the table `songs_user` is created with the following structures:

|Field|Type|Key|
|-----|----|----|
|user_id|INT|Partition|
|session_id|INT|Partition|
|item_in_session|INT|Clustering|
|artist|TEXT||
|song_title|TEXT||
|user|TEXT||
|(user_id,session_id), item_id_session||PRIMARY|

### Query 3
For the third question the following query is formulated:

	SELECT user, song_title 
	FROM songs_history
	WHERE song_title = 'All Hands Against His Own' ;

and for the above query the table `songs_history` is created with the following structures:

|Field|Type|Key|
|-----|----|----|
|song_title|TEXT|Partition|
|user_id|INT|Clustering|
|user|TEXT||
|(song_title,user_id)||PRIMARY|

## Project File Structures
1. **event_data** - folder containing the data files in csv format.
2. **images**- contains the images used in the notebook file.
3. **event_datafile_new.csv**- the csv file generated by concating all the files in event_data folder.
4. **Project_1B_ Project.ipynb**- python jupyter notebook in which all the work in the project is done.
5. **README.md**- contains the description of the project.